/* Lab 2 for ECE224
 * Group 6
 * Richard Shi and Fanzhe Meng
 *
 * Audio Player Module
 */

#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <stdint.h>

#include "alt_types.h"
#include <altera_up_avalon_audio.h>
#include <altera_up_avalon_audio_and_video_config.h>

#include "fatfs.h"
#include "diskio.h"

#include "audioplayer.h"

// Defines
#define SONGFILE_OPEN_MODE 1
#define BUFFER_SIZE 8

// Globals
static uint8_t Buff[8192] __attribute__ ((aligned(4)));  /* Working buffer */

int playSong(char *songFilename, unsigned long size){
	//xprintf("I'm playing %s with a size of %d\n", songFile, size);
	FIL songFile;
	alt_up_audio_dev *audio_dev;

	uint32_t bytesToRead, bytesBeenRead;
	long totalBytesToRead;
	uint8_t l_buf[2], r_buf[2];

    FRESULT result = f_open(&songFile, songFilename, SONGFILE_OPEN_MODE);
	if(result != FR_OK){
		putRc(result);
		return 1;
	}

    // open audio device
    audio_dev = alt_up_audio_open_dev("/dev/Audio");
    if (audio_dev == NULL)
        alt_printf("Error: could not open audio device \n");
    else
        alt_printf("Opened audio device \n");

    totalBytesToRead = songs[currentTrack].size;


}


